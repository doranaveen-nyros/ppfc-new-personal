@page "/admin/hpchargeduration"
@using Radzen
@using Radzen.Blazor
@using ppfc.DTO
@attribute [Authorize]
@inject HttpClient Http
@inject NotificationService NotificationService
@inject DialogService DialogService

<RadzenNotification />

<PageTitle>Hp Charge Duration</PageTitle>

@if (IsLoading)
{
    <div class="d-flex flex-column align-items-center justify-content-center vh-100 text-muted">
        <div class="spinner-border text-primary mb-3" role="status"></div>
        <p>Loading HP Charge Duration Data...</p>
    </div>
}
else
{
    <div class="d-flex justify-content-between align-items-center mb-2">
        <div><h3 class="text-left mb-0">HP Charge Duration</h3></div>
        <RadzenButton Icon="add_circle"
                      Text="Add New"
                      Click="@AddNew"
                      Style="margin-bottom:6px"
                      ButtonStyle="ButtonStyle.Secondary" />
    </div>

    <div>
        <RadzenDataGrid @ref="grid" TItem="HPChargeDurationDto" Data="hpChargeDurations" EditMode="DataGridEditMode.Single"
                        AllowPaging="false">
            <Columns>
                <RadzenDataGridColumn TItem="HPChargeDurationDto" Property="FromDate" Title="From Date" Width="180px">
                    <Template Context="item">
                        @(item.FromDate.HasValue? item.FromDate.Value.ToString("dd-MMM-yyyy") : "-")
                    </Template>
                    <EditTemplate Context="item">
                        <RadzenDatePicker @bind-Value="item.FromDate" Style="width:100%" TValue="DateTime ?" />
                    </EditTemplate>
                </RadzenDataGridColumn>

                <RadzenDataGridColumn TItem="HPChargeDurationDto" Property="ToDate" Title="To Date" Width="180px">
                    <Template Context="item">
                        @(item.ToDate.HasValue? item.ToDate.Value.ToString("dd-MMM-yyyy") : "-")
                    </Template>
                    <EditTemplate Context="item">
                        <RadzenDatePicker @bind-Value="item.ToDate" Style="width:100%" TValue="DateTime ?" />
                    </EditTemplate>
                </RadzenDataGridColumn>

                <RadzenDataGridColumn TItem="HPChargeDurationDto" Property="HPChargeInstallments" Title="HP Charge Inst's" Width="150px">
                    <Template Context="item">
                        @(item.HPChargeInstallments.HasValue? item.HPChargeInstallments.Value.ToString() : "-")
                    </Template>
                    <EditTemplate Context="item">
                        <RadzenNumeric @bind-Value="item.HPChargeInstallments" Min="0" Style="width:100%" />
                    </EditTemplate>
                </RadzenDataGridColumn>

                <RadzenDataGridColumn TItem="HPChargeDurationDto" Title="Actions" Width="140px">
                    <Template Context="item">
                        <RadzenButton Icon="edit" Size="ButtonSize.Small" ButtonStyle="ButtonStyle.Light"
                                      Click="@(args => EditDuration(item))" />
                        <RadzenButton Icon="delete" Size="ButtonSize.Small" ButtonStyle="ButtonStyle.Danger"
                                      Click="@(args => DeleteDuration(item))" Style="margin-right:8px" />
                    </Template>

                    <EditTemplate Context="item">
                        <RadzenButton Icon="save" Size="ButtonSize.Small" ButtonStyle="ButtonStyle.Primary"
                                      Click="@(args => SaveDuration(item))" Style="margin-right:8px" />
                        <RadzenButton Icon="close" Size="ButtonSize.Small" ButtonStyle="ButtonStyle.Light"
                                      Click="@(args => CancelEdit(item))" />
                    </EditTemplate>
                </RadzenDataGridColumn>
            </Columns>
        </RadzenDataGrid>
    </div>
}

